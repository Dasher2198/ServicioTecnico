Tabla USUARIO
CREATE TABLE USUARIO (
id_usuario INT IDENTITY(1,1) PRIMARY KEY,
nombre NVARCHAR(50) NOT NULL,
apellidos NVARCHAR(100) NOT NULL,
cedula NVARCHAR(20) UNIQUE NOT NULL,
email NVARCHAR(100) UNIQUE NOT NULL,
telefono NVARCHAR(15),
direccion NVARCHAR(200),
fecha_registro DATETIME DEFAULT GETDATE(),
tipo_usuario NVARCHAR(10) CHECK (tipo_usuario IN ('cliente', 'tecnico')) NOT NULL,
password NVARCHAR(255) NOT NULL,
estado NVARCHAR(10) CHECK (estado IN ('activo', 'inactivo')) DEFAULT 'activo'
); 
Tabla ESTACION_RTV
CREATE TABLE ESTACION_RTV (
id_estacion INT IDENTITY(1,1) PRIMARY KEY,
nombre_estacion NVARCHAR(100) NOT NULL,
direccion NVARCHAR(200) NOT NULL,
telefono NVARCHAR(15),
email NVARCHAR(100),
provincia NVARCHAR(50) NOT NULL,
canton NVARCHAR(50) NOT NULL,
distrito NVARCHAR(50) NOT NULL,
horario_atencion NVARCHAR(100),
estado NVARCHAR(10) CHECK (estado IN ('activa', 'inactiva')) DEFAULT 'activa'
); 
Tabla VEHICULO
CREATE TABLE VEHICULO (
id_vehiculo INT IDENTITY(1,1) PRIMARY KEY,
numero_placa NVARCHAR(10) UNIQUE NOT NULL,
 id_propietario INT NOT NULL,
marca NVARCHAR(50) NOT NULL,
modelo NVARCHAR(50) NOT NULL,
año INT NOT NULL,
numero_chasis NVARCHAR(50),
color NVARCHAR(30),
tipo_combustible NVARCHAR(20),
cilindrada NVARCHAR(10),
fecha_registro DATETIME DEFAULT GETDATE(),
FOREIGN KEY (id_propietario) REFERENCES USUARIO(id_usuario)
); 
Tabla CITA
CREATE TABLE CITA (
id_cita INT IDENTITY(1,1) PRIMARY KEY,
id_vehiculo INT NOT NULL,
id_estacion INT NOT NULL,
fecha_cita DATE NOT NULL,
hora_cita TIME NOT NULL,
estado_cita NVARCHAR(15) CHECK (estado_cita IN ('programada', 'completada', 'cancelada')) DEFAULT 'programada',
observaciones NVARCHAR(500),
fecha_creacion DATETIME DEFAULT GETDATE(),
FOREIGN KEY (id_vehiculo) REFERENCES VEHICULO(id_vehiculo),
FOREIGN KEY (id_estacion) REFERENCES ESTACION_RTV(id_estacion)
); 
Tabla INSPECCION
CREATE TABLE INSPECCION (
id_inspeccion INT IDENTITY(1,1) PRIMARY KEY,
id_cita INT NOT NULL,
id_tecnico INT NOT NULL,
fecha_inspeccion DATETIME NOT NULL,
resultado NVARCHAR(10) CHECK (resultado IN ('aprobado', 'rechazado')) NOT NULL,
observaciones_tecnicas NVARCHAR(1000),
fecha_vencimiento DATE,
numero_certificado NVARCHAR(50),
FOREIGN KEY (id_cita) REFERENCES CITA(id_cita),
FOREIGN KEY (id_tecnico) REFERENCES USUARIO(id_usuario)
);
 Tabla DETALLE_INSPECCION
CREATE TABLE DETALLE_INSPECCION (
id_detalle INT IDENTITY(1,1) PRIMARY KEY,
id_inspeccion INT NOT NULL,
categoria_revision NVARCHAR(50) NOT NULL,
resultado_item NVARCHAR(10) CHECK (resultado_item IN ('OK', 'FALLO')) NOT NULL,
observaciones_item NVARCHAR(500),
FOREIGN KEY (id_inspeccion) REFERENCES INSPECCION(id_inspeccion)
);
 Tabla CERTIFICADO
CREATE TABLE CERTIFICADO (
id_certificado INT IDENTITY(1,1) PRIMARY KEY,
id_inspeccion INT NOT NULL,
numero_certificado NVARCHAR(50) UNIQUE NOT NULL,
fecha_emision DATETIME DEFAULT GETDATE(),
fecha_vencimiento DATE NOT NULL,
ruta_archivo_digital NVARCHAR(500),
estado_certificado NVARCHAR(10) CHECK (estado_certificado IN ('valido', 'vencido', 'anulado')) DEFAULT 'valido',
FOREIGN KEY (id_inspeccion) REFERENCES INSPECCION(id_inspeccion));
 Índices para la optimización
CREATE INDEX IX_VEHICULO_Placa ON VEHICULO(numero_placa);
CREATE INDEX IX_CITA_Fecha ON CITA(fecha_cita, hora_cita);
CREATE INDEX IX_INSPECCION_Fecha ON INSPECCION(fecha_inspeccion);
CREATE INDEX IX_CERTIFICADO_Numero ON CERTIFICADO(numero_certificado);
